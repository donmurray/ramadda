<outputhandlers class="org.ramadda.repository.output.ServiceOutputHandler" icon="/icons/png.png"  xxxentryType="type_image" entryPattern="(.*\.png|.*\.gif|.*\.jpg|.*\.jpeg|.*\.tiff)">

  <outputhandler>
   <service id="imagemagick.convert.type" label="Convert Image" command="${media.imagemagick.path}/convert">
<description><![CDATA[
Runs ImageMagick convert
]]></description>
          <arg value="${entry.file}" type="entry"  primary="true"></arg>
          <arg type="int" prefix="-resize" name="resize" label="Resize" help=" percent" value="${value}%"  />
          <arg type="enumeration" name="newtype" label="Convert to" values="png,gif,jpg,tiff" value="${file}"  file="${entry.file.base}.${value}" />
          <output type="type_image" pattern=".*"/>
    </service>
  </outputhandler>




  <outputhandler>
   <service id="imagemagick.animate" label="Make animated GIF" command="${media.imagemagick.path}/convert">
   <description><![CDATA[Makes animated GIF using ImageMagick]]></description>
   <arg type="int" label="Delay" help="Ticks" default="50" prefix="-delay"/>
   <arg type="enumeration" label="Loop" values="0:no loop,1:loop"  prefix="-loop"/>
   <arg value="${entry.file}" multiple="true" type="entry"  primary="true"></arg>
<!--
          <arg type="string" label="Filename" name="filename" default="animation"  prefix="-loop"/>
-->
   <arg value="${file}" file="animated.gif"  />
   <output type="type_image" pattern=".*"/>
  </service>
  </outputhandler>


  <outputhandler>
   <service id="imagemagick.strip" label="Strip EXIF Metadata" command="${media.imagemagick.path}/convert">
<description><![CDATA[Strips out EXIF metadata from image using ImageMagick -strip]]></description>
          <arg value="-strip"/>
          <arg value="${entry.file}" type="entry"  primary="true"></arg>
          <arg value="${file}" file="${entry.file.base}_stripped.${entry.file.suffix}"  />
          <output type="type_image" pattern=".*"/>
    </service>
  </outputhandler>


  <outputhandler>
   <service id="imagemagick.polaroid" label="Polaroid image" command="${media.imagemagick.path}/convert">
<description><![CDATA[
Runs ImageMagick polaroid conversion
]]></description>
          <arg value="${entry.file}" type="entry"  primary="true"></arg>

          <arg prefix="-bordercolor" label="Border color" />
          <arg prefix="-background" label="Background color" />

          <arg value="+polaroid"/>
          <arg value="${file}" file="${entry.file.base}_polaroid.png"  />
          <output type="type_image" pattern=".*"/>
    </service>
  </outputhandler>


  <outputhandler>
   <service id="imagemagick.identify" label="Identify image" command="${media.imagemagick.path}/identify">
<description><![CDATA[
Runs ImageMagick identify
]]></description>
          <arg value="${entry.file}" type="entry" primary="true"></arg>
          <output showResults="true" stdout="true"/>
    </service>
  </outputhandler>




</outputhandlers>
